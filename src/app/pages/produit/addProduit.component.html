
<div class="add-product-page">
  <!-- Header -->
  <div class="page-header">
    <button class="btn-back" routerLink="producteur/produit/">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
        <path d="M15 10H5M10 5l-5 5 5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Retour √† mes produits
    </button>
    <div class="header-info">
      <h1>Ajouter un nouveau produit</h1>
      <p class="subtitle">Remplissez les informations ci-dessous pour ajouter un produit √† votre catalogue</p>
    </div>
  </div>

  <!-- Alert Info -->
  <div class="alert-info">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
      <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
      <path d="M10 6v4M10 14h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
    <div>
      <strong>Important :</strong> Votre produit sera soumis √† validation par un administrateur avant d'√™tre visible sur la plateforme.
    </div>
  </div>

  <!-- Form Container -->
  <form class="form-container" (ngSubmit)="onSubmit()" #productForm="ngForm">
    <div class="form-layout">
      <!-- Left Column - Form Fields -->
      <div class="form-section">
        <div class="section-card">
          <h2 class="section-title">
            <span class="title-icon">üìù</span>
            Informations g√©n√©rales
          </h2>

          <!-- Product Name -->
          <div class="form-group">
            <label class="form-label required">Nom du produit</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Ex: Tomates bio"
              [(ngModel)]="productData.name"
              name="name"
              required>
            <span class="help-text">Donnez un nom clair et descriptif √† votre produit</span>
          </div>

          <!-- Category -->
          <div class="form-group">
            <label class="form-label required">Cat√©gorie</label>
            <select 
              class="form-control" 
              [(ngModel)]="productData.category"
              name="category"
              required>
              <option value="">S√©lectionnez une cat√©gorie</option>
              <option 
                  *ngFor="let categorie of categories" 
                  [value]="categorie.id">
                  {{ categorie.nom }}
                </option>
            </select>
          </div>

          <!-- Description -->
          <div class="form-group">
            <label class="form-label required">Description</label>
            <textarea 
              class="form-control" 
              rows="4"
              placeholder="D√©crivez votre produit, son origine, ses qualit√©s..."
              [(ngModel)]="productData.description"
              name="description"
              required></textarea>
            <div class="char-counter">
              {{ productData.description.length }} / 500 caract√®res
            </div>
          </div>
        </div>

        <!-- Pricing Section -->
        <div class="section-card">
          <h2 class="section-title">
            <span class="title-icon">üí∞</span>
            Prix et conditionnement
          </h2>

          <div class="form-row">
            <!-- Price -->
            <div class="form-group">
              <label class="form-label required">Prix</label>
              <div class="input-with-icon">
                <input 
                  type="number" 
                  class="form-control" 
                  placeholder="0"
                  [(ngModel)]="productData.price"
                  name="price"
                  min="0"
                  required>
                <span class="input-icon">Fr</span>
              </div>
            </div>

            <!-- Unit -->
            <div class="form-group">
              <label class="form-label required">Unit√©</label>
              <select 
                class="form-control" 
                [(ngModel)]="productData.unit"
                name="unit"
                required>
                <option value="">Unit√©</option>
                <option value="kg">Kilogramme (kg)</option>
                <option value="g">Gramme (g)</option>
                <option value="l">Litre (L)</option>
                <option value="piece">Pi√®ce</option>
                <option value="botte">Botte</option>
                <option value="paquet">Paquet</option>
              </select>
            </div>
          </div>

          <!-- Weight/Quantity -->
          <div class="form-group">
            <label class="form-label required">Poids/Quantit√©</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Ex: 1 kg, 500 g, 1 pi√®ce"
              [(ngModel)]="productData.weight"
              name="weight"
              required>
          </div>

          <!-- Stock -->
          <div class="form-group">
            <label class="form-label required">Stock disponible</label>
            <input 
              type="number" 
              class="form-control" 
              placeholder="Quantit√© en stock"
              [(ngModel)]="productData.stock"
              name="stock"
              min="0"
              required>
            <span class="help-text">Nombre d'unit√©s disponibles √† la vente</span>
          </div>
        </div>

        <!-- Additional Info -->
        <div class="section-card">
          <h2 class="section-title">
            <span class="title-icon">üå±</span>
            Informations compl√©mentaires
          </h2>

          <!-- Origin -->
          <div class="form-group">
            <label class="form-label">Origine</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Ex: Ferme de Pikine"
              [(ngModel)]="productData.origin"
              name="origin">
          </div>

          <!-- Certifications -->
          <div class="form-group">
            <label class="form-label">Certifications</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="productData.isBio"
                  name="isBio">
                <span class="checkbox-text">
                  <strong>Bio</strong> - Produit issu de l'agriculture biologique
                </span>
              </label>
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="productData.isLocal"
                  name="isLocal">
                <span class="checkbox-text">
                  <strong>100% Local</strong> - Produit et cultiv√© localement
                </span>
              </label>
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="productData.isSeasonal"
                  name="isSeasonal">
                <span class="checkbox-text">
                  <strong>De saison</strong> - Produit de saison actuellement disponible
                </span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column - Image Upload -->
      <div class="form-section">
        <div class="section-card sticky-card">
          <h2 class="section-title">
            <span class="title-icon">üì∑</span>
            Images du produit
          </h2>

          <!-- Main Image Upload -->
          <div class="image-upload-container">
            <div class="main-image-area" *ngIf="!productData.mainImage" (click)="mainImageInput.click()">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                <path d="M24 8v32M8 24h32" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              </svg>
              <p class="upload-text">Ajouter une image principale</p>
              <p class="upload-hint">PNG, JPG jusqu'√† 5MB</p>
              <input 
                type="file" 
                #mainImageInput
                accept="image/*"
                (change)="onMainImageSelect($event)"
                hidden>
            </div>

            <div class="image-preview" *ngIf="productData.mainImage">
              <img [src]="productData.mainImage" alt="Image principale">
              <button class="btn-remove-image" type="button" (click)="removeMainImage()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M4 4l12 12M16 4L4 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
              <div class="image-badge">Image principale</div>
            </div>
          </div>

          <!-- Additional Images -->
          <div class="additional-images">
            <label class="form-label">Images suppl√©mentaires (optionnel)</label>
            <div class="images-grid">
              <div 
                class="small-image-upload" 
                *ngFor="let img of productData.additionalImages; let i = index">
                <img [src]="img" alt="Image {{ i + 1 }}">
                <button class="btn-remove-small" type="button" (click)="removeAdditionalImage(i)">
                  √ó
                </button>
              </div>
              <div 
                class="small-image-upload add-more" 
                *ngIf="productData.additionalImages.length < 4"
                (click)="additionalImageInput.click()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <input 
                  type="file" 
                  #additionalImageInput
                  accept="image/*"
                  (change)="onAdditionalImageSelect($event)"
                  hidden>
              </div>
            </div>
            <span class="help-text">Maximum 4 images suppl√©mentaires</span>
          </div>

          <!-- Preview Card -->
          <div class="preview-card" *ngIf="productData.name">
            <h3 class="preview-title">Aper√ßu</h3>
            <div class="product-preview">
              <div class="preview-image">
                <img [src]="productData.mainImage || 'assets/images/placeholder.jpg'" alt="Aper√ßu">
                <span class="preview-badge" *ngIf="productData.isBio">Bio</span>
              </div>
              <div class="preview-info">
                <h4>{{ productData.name || 'Nom du produit' }}</h4>
                <p class="preview-weight">{{ productData.weight || '1 kg' }}</p>
                <div class="preview-footer">
                  <span class="preview-price">{{ productData.price || 0 }} Fr</span>
                  <span class="preview-status pending">En attente</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn-cancel" routerLink="producteur/produit/">
        Annuler
      </button>
      <button type="submit" class="btn-submit" [disabled]="!productForm.form.valid">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M16 5L7 14l-4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Ajouter le produit
      </button>
    </div>
  </form>
</div>